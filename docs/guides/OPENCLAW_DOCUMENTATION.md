# OpenClaw Documentation Integration

This document explains how the bootstrap system automatically generates and maintains documentation for OpenClaw to understand all available tools and capabilities.

## Overview

OpenClaw reads documentation from `~/.openclaw/workspace/TOOLS.md` to understand what tools, packages, and capabilities are available on the system. This file is automatically generated and updated to ensure OpenClaw always has current information.

## How It Works

### 1. Initial Generation

When you install OpenClaw (module 13), the bootstrap system automatically generates `TOOLS.md`:

```bash
cd ~/openclaw-config/bootstrap
./bootstrap.sh --only openclaw
```

This creates `~/.openclaw/workspace/TOOLS.md` with comprehensive documentation of:
- All AI tools (Claude, OpenAI, Gemini, OpenClaw)
- Deployment platforms (Vercel, Netlify, Supabase)
- Development tools (Node.js, Python, pnpm, Biome, Doppler, etc.)
- Security tools (UFW, fail2ban, AIDE, SSH hardening)
- MCP servers (10 configured servers)
- File sharing tools (rclone, Dropbox, Google Drive)
- System utilities and shell aliases
- Environment variable requirements
- Quick reference for common tasks

### 2. Automatic Updates

The `TOOLS.md` file is automatically regenerated during:

**Daily auto-updates (3:00 AM):**
- After system packages are updated
- After Python/Node packages are updated
- After the openclaw-config repository is synced
- Ensures OpenClaw always knows about newly installed tools

**Manual updates:**
```bash
# Trigger auto-update manually
systemctl --user start openclaw-auto-update.service

# Or regenerate TOOLS.md directly
~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
```

### 3. Manual Generation

To manually regenerate the documentation:

```bash
# Make script executable (one-time)
chmod +x ~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh

# Generate TOOLS.md
~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
```

The script:
- Reads the bootstrap state file (`~/.openclaw/bootstrap-state.yaml`)
- Collects version information for installed tools
- Generates comprehensive markdown documentation
- Saves to `~/.openclaw/workspace/TOOLS.md`

## OpenClaw Workspace Structure

After installation, your OpenClaw workspace contains:

```
~/.openclaw/workspace/
├── TOOLS.md           # Auto-generated tool documentation (THIS FILE)
├── AGENTS.md          # Agent definitions (user-configured)
├── SOUL.md            # Persona and behavior guidelines (user-configured)
├── IDENTITY.md        # Identity configuration (user-configured)
├── USER.md            # User context (user-configured)
├── BOOTSTRAP.md       # Created on first setup
└── HEARTBEAT.md       # Optional proactive tasks
```

**Only `TOOLS.md` is auto-generated.** Other files are managed by you.

## What OpenClaw Learns

From `TOOLS.md`, OpenClaw understands:

1. **Available Commands** - What CLIs it can execute
2. **API Integrations** - What services it can connect to
3. **Deployment Options** - Where it can deploy projects
4. **Security Constraints** - What security measures are in place
5. **Environment Variables** - What credentials are needed
6. **File Locations** - Where important files and configs live
7. **Quick Tasks** - Common operations and their syntax

## Integration with Development Workflow

### On Every Commit/Deployment

To ensure OpenClaw documentation stays current:

1. **Auto-updates run daily** - TOOLS.md is regenerated
2. **Manual regeneration** - Run after installing new tools:
   ```bash
   ~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
   ```

3. **Git hooks** (optional) - Regenerate on commit:
   ```bash
   # .git/hooks/post-commit
   ~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
   ```

### When Installing New Tools

If you install tools outside the bootstrap system:

```bash
# Install your tool
npm install -g some-new-cli

# Regenerate documentation
~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh

# Verify OpenClaw sees it
cat ~/.openclaw/workspace/TOOLS.md | grep some-new-cli
```

## Customizing TOOLS.md

While `TOOLS.md` is auto-generated, you can:

1. **Add custom sections** - Append your own documentation at the end
2. **Use templates** - Modify `generate-openclaw-tools-doc.sh` to customize format
3. **Version control** - Track changes with git

**Warning:** Auto-regeneration will overwrite the entire file. For persistent custom docs, create separate files in the workspace (e.g., `CUSTOM_TOOLS.md`).

## Verification

Check if OpenClaw has current documentation:

```bash
# View generated file
cat ~/.openclaw/workspace/TOOLS.md

# Check last update time
stat -f "Modified: %Sm" ~/.openclaw/workspace/TOOLS.md

# Verify bootstrap state is current
cat ~/.openclaw/bootstrap-state.yaml
```

## Troubleshooting

### TOOLS.md not generated

**Check script exists and is executable:**
```bash
ls -l ~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
chmod +x ~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
```

**Run manually and check for errors:**
```bash
~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
```

### TOOLS.md is outdated

**Regenerate manually:**
```bash
~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh
```

**Check auto-update status:**
```bash
systemctl --user status openclaw-auto-update.timer
journalctl --user -u openclaw-auto-update.service
```

### OpenClaw doesn't see new tools

**Verify TOOLS.md exists:**
```bash
cat ~/.openclaw/workspace/TOOLS.md
```

**Restart OpenClaw:**
```bash
# If running as a service
openclaw restart

# If running manually
# Stop current session, then:
openclaw start
```

## Script Reference

### generate-openclaw-tools-doc.sh

**Location:** `~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh`

**Purpose:** Generate comprehensive tool documentation for OpenClaw

**Requirements:**
- Bootstrap state file: `~/.openclaw/bootstrap-state.yaml`
- OpenClaw workspace: `~/.openclaw/workspace/`
- System commands: `node`, `python3`, `sed`, `awk`

**Output:** `~/.openclaw/workspace/TOOLS.md`

**Usage:**
```bash
# Standard usage
./generate-openclaw-tools-doc.sh

# With custom workspace
OPENCLAW_WORKSPACE=/custom/path ./generate-openclaw-tools-doc.sh
```

**Integration points:**
1. Called by `modules/13-openclaw.sh` during installation
2. Called by `scripts/auto-update.sh` during daily updates
3. Can be called manually anytime

## Best Practices

1. **Let auto-updates handle it** - TOOLS.md stays current automatically
2. **Regenerate after major changes** - New tools, package updates, etc.
3. **Version control workspace** - Track changes to understand tool evolution
4. **Monitor update logs** - Check `/var/log/openclaw/auto-update-*.log`
5. **Test after updates** - Verify OpenClaw can access new tools

## Future Enhancements

Planned improvements:

- [ ] Generate additional workspace files (AGENTS.md templates)
- [ ] Track tool usage metrics
- [ ] Alert on security updates for installed tools
- [ ] Generate MCP server-specific documentation
- [ ] Create tool change changelog
- [ ] Integration with CI/CD for deployment documentation

## Files Created/Modified

This documentation system creates/modifies:

| File | Purpose | Auto-generated |
|------|---------|---------------|
| `~/.openclaw/workspace/TOOLS.md` | Tool documentation | Yes ✓ |
| `~/openclaw-config/bootstrap/scripts/generate-openclaw-tools-doc.sh` | Generation script | No |
| `~/openclaw-config/bootstrap/modules/13-openclaw.sh` | Calls script on install | No |
| `~/openclaw-config/bootstrap/scripts/auto-update.sh` | Calls script on update | No |
| `~/.openclaw/bootstrap-state.yaml` | Source data for docs | Yes ✓ |

## Support

For issues:
1. Check logs: `/var/log/openclaw/auto-update-*.log`
2. Verify bootstrap state: `cat ~/.openclaw/bootstrap-state.yaml`
3. Run script manually to see errors
4. Report issues: https://github.com/nyldn/openclaw-config/issues

---

**Last Updated:** 2026-02-01
**Bootstrap Version:** 1.2.0
**OpenClaw Module:** 13-openclaw
